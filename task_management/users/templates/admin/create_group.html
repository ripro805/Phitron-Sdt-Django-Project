{% extends "admin/admin_dashboard.html" %}
{% block content %}
<div class="container mx-auto px-6 py-10">
	<div class="bg-white shadow-none rounded-none p-0">
		{% if messages %}
			<div class="mb-6">
				{% for message in messages %}
					<div class="px-4 py-3 rounded mb-2 text-sm font-semibold {% if message.tags == 'success' %}bg-green-100 text-green-700 border border-green-300{% elif message.tags == 'error' %}bg-red-100 text-red-700 border border-red-300{% else %}bg-blue-100 text-blue-700 border border-blue-300{% endif %}">
						{{ message }}
					</div>
				{% endfor %}
			</div>
		{% endif %}
		<h2 class="text-2xl font-bold mb-6 text-blue-700">Create New Group</h2>
		<form method="post" class="space-y-6">
			{% csrf_token %}
						<div>
								<label for="id_name" class="block text-sm font-medium text-gray-700 mb-2">Group Name</label>
								{{ form.name }}
								{% if form.name.errors %}
										<p class="text-red-500 text-xs mt-2">{{ form.name.errors.0 }}</p>
								{% endif %}
						</div>
						<div>
								<label class="block text-sm font-medium text-gray-700 mb-2">Permissions</label>
								<button type="button" id="select-all-btn" class="mb-3 bg-blue-100 hover:bg-blue-200 text-blue-700 font-semibold px-4 py-2 rounded transition">Select All</button>
								<div id="permissions-list" class="bg-gray-50 p-4 rounded border border-gray-200 max-h-96 overflow-y-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
									{% for checkbox in form.permissions %}
										<label class="flex items-center space-x-3 text-base py-3 px-3 rounded hover:bg-blue-50 transition w-full">
											{{ checkbox.tag|safe }}
											<span class="ml-2">{{ checkbox.choice_label }}</span>
										</label>
									{% endfor %}
								</div>
								{% if form.permissions.errors %}
										<p class="text-red-500 text-xs mt-2">{{ form.permissions.errors.0 }}</p>
								{% endif %}
						</div>
			<button type="submit" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded transition text-lg">Create Group</button>
		</form>
	</div>
<script>
	document.addEventListener('DOMContentLoaded', function() {
		const selectAllBtn = document.getElementById('select-all-btn');
		const permissionsList = document.getElementById('permissions-list');
		let allSelected = false;
		selectAllBtn.addEventListener('click', function() {
			const checkboxes = permissionsList.querySelectorAll('input[type="checkbox"]');
			allSelected = !allSelected;
			checkboxes.forEach(cb => { cb.checked = allSelected; });
			selectAllBtn.textContent = allSelected ? 'Deselect All' : 'Select All';
		});
	});
</script>
</div>
{% endblock content %}
